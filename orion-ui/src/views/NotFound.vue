<template>
  <div class="not-found">
    <svg class="not-found__message" fill="none" viewBox="0 0 607 511" xmlns="http://www.w3.org/2000/svg">
      <title>404 Page Not Found</title>
      <path d="M200.2 505v-17.5h6.1c1.8 0 3.1.4 4 1.2 1 .8 1.4 2 1.4 3.4v2.2c0 1.5-.4 2.6-1.4 3.4-.9.8-2.2 1.2-4 1.2h-4v6.1h-2.1Zm2.2-8h3.9c1.2 0 2-.2 2.5-.7.5-.4.8-1.1.8-2v-2c0-1-.3-1.7-.8-2.1-.5-.5-1.3-.7-2.5-.7h-4v7.5Zm18 6.3c.8 0 1.6 0 2.2-.4a4 4 0 0 0 1.8-1.4v-2h-4.6c-.6 0-1.1 0-1.5.4-.4.2-.6.7-.6 1.5 0 .6.2 1 .7 1.4.4.4 1 .5 2 .5Zm-.3 2c-1.1 0-2.2-.4-3-1-1-.6-1.4-1.5-1.4-2.8 0-1.2.3-2 1-2.7a4 4 0 0 1 2.8-1h4.9v-1.9c0-.7-.3-1.2-.8-1.7-.5-.4-1.2-.7-2.2-.7-1 0-1.8.2-2.4.5-.5.3-1 1-1.2 2l-1.9-.6c.3-1.1.8-2 1.7-2.7.8-.7 2-1 3.7-1 1.5 0 2.8.3 3.8 1 1 .6 1.5 1.6 1.5 3v5.8c0 .8.2 1.3.6 1.5.5.2 1.1.2 2 0v2c-1 .2-1.8.1-2.6-.1-.7-.3-1.2-1-1.3-2h-.4c-.4.6-1 1.2-2 1.6a6 6 0 0 1-2.8.7Zm26.3.7c0 1.2-.4 2.1-1.3 2.7-.9.6-2 .9-3.2.9h-4c-1.4 0-2.5-.3-3.3-.8-.9-.5-1.3-1.3-1.3-2.4 0-.7.2-1.3.6-1.7.3-.4.9-.6 1.6-.7v-.5c-.5 0-1-.3-1.3-.6-.3-.3-.4-.8-.4-1.5s.2-1.2.5-1.7c.4-.5 1.1-.8 2-.9v-.4c-.7-.2-1.2-.6-1.4-1a3 3 0 0 1-.4-1.4v-.6a3 3 0 0 1 1.3-2.5c.9-.7 2-1 3.6-1h6.5v2l-3.4-.5v.4c.6.1 1 .4 1.3.9.3.4.5.9.5 1.3v.6a3 3 0 0 1-1.2 2.4c-.8.7-2 1-3.8 1h-2.6c-.4 0-.7 0-.9.3-.2.2-.3.5-.3 1 0 .4.1.7.4 1 .3.2.7.3 1.3.3h5c1.2 0 2.2.3 3 .8.8.5 1.2 1.4 1.2 2.6Zm-7-7.7c1 0 1.6-.2 2-.5.5-.3.8-.8.8-1.5v-.7c0-.7-.3-1.2-.7-1.5-.5-.3-1.2-.4-2-.4-1 0-1.6.1-2.1.4-.5.3-.7.8-.7 1.5v.7c0 .7.2 1.2.7 1.5.5.3 1.1.5 2 .5Zm-1.6 9.5h4.4a3 3 0 0 0 1.6-.3c.4-.3.6-.7.6-1.3 0-.6-.2-1-.5-1.3-.4-.2-.9-.3-1.5-.3h-6.9v1.4c0 .6.2 1 .6 1.4.4.3 1 .4 1.7.4Zm24.1-5.7c-.4 1.1-1 1.9-1.8 2.4-.9.5-2 .7-3.6.7a6 6 0 0 1-4-1.2c-1-.9-1.5-2.1-1.5-3.8v-3.5c0-1.7.5-3 1.5-3.7a6 6 0 0 1 4-1.3c1.6 0 3 .4 4 1.3.9.8 1.4 2.1 1.4 3.9v2h-8.7v1.4c0 1 .2 1.8.8 2.3.5.5 1.3.8 2.4.8 1 0 1.9-.2 2.3-.5.5-.3.9-.7 1.1-1.4l2.1.6Zm-8.7-5.4v.6h6.5v-.4c0-1.2-.3-2-.8-2.5-.6-.6-1.4-.9-2.5-.9-1 0-1.9.3-2.4.8-.6.5-.8 1.3-.8 2.4Zm36.5 8.3-7.9-14.5V505h-2v-17.5h3l8 14.9v-14.9h2V505h-3Zm13.2.2c-1.6 0-3-.4-4-1.2-1-.8-1.5-2-1.5-3.7v-3.6c0-1.7.5-3 1.5-3.8a6 6 0 0 1 4-1.2 6 6 0 0 1 4 1.2c1 .9 1.4 2.1 1.4 3.8v3.6c0 1.7-.5 2.9-1.5 3.7-1 .8-2.3 1.2-4 1.2Zm0-2c1 0 1.9-.2 2.4-.6.6-.5.9-1.3.9-2.3v-3.6c0-1-.3-1.8-.9-2.3-.5-.5-1.3-.7-2.4-.7-1.1 0-2 .2-2.5.7-.5.5-.8 1.3-.8 2.3v3.6c0 1 .3 1.8.8 2.3.6.4 1.4.7 2.5.7Zm16.5 2c-1.4 0-2.5-.4-3.2-1.1-.7-.8-1.1-2-1.1-3.4v-6.8h-2.6v-2h2.6v-4.4h2.2v4.4h4.8v2h-4.8v6.8c0 .9.2 1.5.6 2 .4.3 1 .5 1.7.5l1-.1a8 8 0 0 0 1.2-.3l.5 1.9a8 8 0 0 1-2.9.5Zm20.1-.2v-17.5H351v2h-9.2v6.8h7.6v2h-7.6v6.7h-2.2Zm21 .2c-1.7 0-3-.4-4-1.2-1-.8-1.5-2-1.5-3.7v-3.6c0-1.7.5-3 1.5-3.8a6 6 0 0 1 4-1.2 6 6 0 0 1 3.9 1.2c1 .9 1.5 2.1 1.5 3.8v3.6c0 1.7-.5 2.9-1.5 3.7-1 .8-2.3 1.2-4 1.2Zm0-2c1 0 1.9-.2 2.4-.6.5-.5.8-1.3.8-2.3v-3.6c0-1-.3-1.8-.8-2.3-.5-.5-1.4-.7-2.5-.7-1 0-1.9.2-2.4.7-.6.5-.8 1.3-.8 2.3v3.6c0 1 .2 1.8.8 2.3.5.4 1.4.7 2.4.7Zm14.2 2a4 4 0 0 1-3-1.2 4.5 4.5 0 0 1-1.2-3.3V492h2.2v8.4c0 1 .2 1.6.6 2.1.4.5 1 .7 2 .7a4 4 0 0 0 2-.5c.6-.4 1.2-1 1.9-1.7v-9h2.2V505h-2.2v-2.2h-.7c-.3.7-.8 1.3-1.5 1.8-.7.4-1.4.6-2.3.6Zm11.3-.2v-13h2.1v2h.7c.3-.6.8-1.2 1.5-1.7.7-.4 1.5-.6 2.3-.6a4 4 0 0 1 3.1 1.2c.8.8 1.2 1.9 1.2 3.3v8.8h-2.2v-8.4c0-1-.3-1.7-.8-2.1-.4-.5-1-.7-1.8-.7s-1.6.2-2.2.6c-.6.4-1.2 1-1.8 1.7v8.9H386Zm20.2-1.9c.8 0 1.5-.1 2-.5.7-.4 1.3-1 2-1.7v-6.5l-1.5-.6a6 6 0 0 0-1.6-.2c-1.1 0-2 .3-2.6.8-.6.5-.9 1.3-.9 2.3v3.5c0 1.2.3 2 .7 2.4a3 3 0 0 0 2 .5Zm3.3-.3c-.4.8-.9 1.4-1.5 1.8-.7.4-1.4.6-2.3.6a4 4 0 0 1-3.1-1.3 5.4 5.4 0 0 1-1.2-3.7v-3.5c0-1.5.5-2.8 1.5-3.7a6 6 0 0 1 4.2-1.3 7.6 7.6 0 0 1 3 .6v-4.8h2.2V505h-2.1v-2.2h-.7Z" fill="#fff"/>
      <circle cx="126.5" cy="301.5" r="4.5" fill="#fff"/>
      <circle cx="21.5" cy="279.5" r="4.5" fill="#fff"/>
      <circle cx="276.5" cy="233.5" r="4.5" fill="#fff"/>
      <circle cx="276.5" cy="311.5" r="4.5" fill="#fff"/>
      <circle cx="429.5" cy="86.5" r="4.5" fill="#fff"/>
      <circle cx="533.5" cy="108.5" r="4.5" fill="#fff"/>
      <g filter="url(#a)" class="not-found__circle">
        <circle cx="22" cy="280" r="16" fill="#fff" fill-opacity=".2"/>
      </g>
      <g filter="url(#b)" class="not-found__circle">
        <circle cx="126" cy="302" r="16" fill="#fff" fill-opacity=".2"/>
      </g>
      <g filter="url(#c)" class="not-found__circle">
        <circle cx="276" cy="234" r="16" fill="#fff" fill-opacity=".2"/>
      </g>
      <g filter="url(#d)" class="not-found__circle">
        <circle cx="429" cy="87" r="16" fill="#fff" fill-opacity=".2"/>
      </g>
      <g filter="url(#e)" class="not-found__circle">
        <circle cx="533" cy="109" r="16" fill="#fff" fill-opacity=".2"/>
      </g>
      <g filter="url(#f)" class="not-found__circle">
        <circle cx="276" cy="312" r="16" fill="#fff" fill-opacity=".2"/>
      </g>
      <g filter="url(#g)">
        <path d="M126.4 296.9V225l61.7-29V432l-80.5 37.8V392l-85.8 39.3v-147m0 0a5 5 0 1 0 0-10 5 5 0 0 0 0 10Zm259 24.8 64.9-30.4v-77.3l-65 30.4M533.5 104V32.3l61.7-29V239L514.7 277V199L429 238.5v-147m0 0a5 5 0 1 0 0-10 5 5 0 0 0 0 10Zm-37.3 6.2v235.8l-166.3 78.2V175.9l166.3-78.2ZM131.4 301.9a5 5 0 1 1-10 0 5 5 0 0 1 10 0Zm149.8-68a5 5 0 1 1-10 0 5 5 0 0 1 10 0Zm0 77.5a5 5 0 1 1-10 0 5 5 0 0 1 10 0ZM538.6 109a5 5 0 1 1-10 0 5 5 0 0 1 10 0Z" stroke="url(#h)" stroke-width="3" stroke-miterlimit="10"/>
      </g>
      <defs>
        <filter id="a" x="0" y="262" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
          <feFlood flood-opacity="0" result="BackgroundImageFix"/>
          <feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
          <feOffset dy="4"/>
          <feGaussianBlur stdDeviation="3"/>
          <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"/>
          <feBlend in2="BackgroundImageFix" result="effect1_dropShadow"/>
          <feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
          <feOffset dy="2"/>
          <feGaussianBlur stdDeviation="2"/>
          <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0"/>
          <feBlend in2="effect1_dropShadow" result="effect2_dropShadow"/>
          <feBlend in="SourceGraphic" in2="effect2_dropShadow" result="shape"/>
        </filter>
        <filter id="b" x="104" y="284" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
          <feFlood flood-opacity="0" result="BackgroundImageFix"/>
          <feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
          <feOffset dy="4"/>
          <feGaussianBlur stdDeviation="3"/>
          <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"/>
          <feBlend in2="BackgroundImageFix" result="effect1_dropShadow"/>
          <feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
          <feOffset dy="2"/>
          <feGaussianBlur stdDeviation="2"/>
          <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0"/>
          <feBlend in2="effect1_dropShadow" result="effect2_dropShadow"/>
          <feBlend in="SourceGraphic" in2="effect2_dropShadow" result="shape"/>
        </filter>
        <filter id="c" x="254" y="216" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
          <feFlood flood-opacity="0" result="BackgroundImageFix"/>
          <feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
          <feOffset dy="4"/>
          <feGaussianBlur stdDeviation="3"/>
          <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"/>
          <feBlend in2="BackgroundImageFix" result="effect1_dropShadow"/>
          <feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
          <feOffset dy="2"/>
          <feGaussianBlur stdDeviation="2"/>
          <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0"/>
          <feBlend in2="effect1_dropShadow" result="effect2_dropShadow"/>
          <feBlend in="SourceGraphic" in2="effect2_dropShadow" result="shape"/>
        </filter>
        <filter id="d" x="407" y="69" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
          <feFlood flood-opacity="0" result="BackgroundImageFix"/>
          <feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
          <feOffset dy="4"/>
          <feGaussianBlur stdDeviation="3"/>
          <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"/>
          <feBlend in2="BackgroundImageFix" result="effect1_dropShadow"/>
          <feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
          <feOffset dy="2"/>
          <feGaussianBlur stdDeviation="2"/>
          <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0"/>
          <feBlend in2="effect1_dropShadow" result="effect2_dropShadow"/>
          <feBlend in="SourceGraphic" in2="effect2_dropShadow" result="shape"/>
        </filter>
        <filter id="e" x="511" y="91" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
          <feFlood flood-opacity="0" result="BackgroundImageFix"/>
          <feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
          <feOffset dy="4"/>
          <feGaussianBlur stdDeviation="3"/>
          <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"/>
          <feBlend in2="BackgroundImageFix" result="effect1_dropShadow"/>
          <feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
          <feOffset dy="2"/>
          <feGaussianBlur stdDeviation="2"/>
          <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0"/>
          <feBlend in2="effect1_dropShadow" result="effect2_dropShadow"/>
          <feBlend in="SourceGraphic" in2="effect2_dropShadow" result="shape"/>
        </filter>
        <filter id="f" x="254" y="294" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
          <feFlood flood-opacity="0" result="BackgroundImageFix"/>
          <feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
          <feOffset dy="4"/>
          <feGaussianBlur stdDeviation="3"/>
          <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"/>
          <feBlend in2="BackgroundImageFix" result="effect1_dropShadow"/>
          <feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
          <feOffset dy="2"/>
          <feGaussianBlur stdDeviation="2"/>
          <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0"/>
          <feBlend in2="effect1_dropShadow" result="effect2_dropShadow"/>
          <feBlend in="SourceGraphic" in2="effect2_dropShadow" result="shape"/>
        </filter>
        <filter id="g" x="5.3" y=".9" width="601.4" height="491.2" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
          <feFlood flood-opacity="0" result="BackgroundImageFix"/>
          <feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
          <feOffset dy="10"/>
          <feGaussianBlur stdDeviation="5"/>
          <feComposite in2="hardAlpha" operator="out"/>
          <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0"/>
          <feBlend in2="BackgroundImageFix" result="effect1_dropShadow"/>
          <feBlend in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>
        </filter>
        <linearGradient id="h" x1="306" y1="3.3" x2="306" y2="469.7" gradientUnits="userSpaceOnUse">
          <stop stop-color="#2CCFFE"/>
          <stop offset="1" stop-color="#115AF4"/>
        </linearGradient>
      </defs>
    </svg>
  </div>
</template>

<script lang="ts">
import { Vue } from 'vue-class-component'

export default class NotFound extends Vue {

  private circles: HTMLElement[] = []
  private interval = 0;

  public mounted() {
    this.circles = this.$el.querySelectorAll('.not-found__circle')

    this.startAnimation();
  }

  public beforeUnmount() {
    window.clearInterval(this.interval)
  }

  private startAnimation() {
    const delay = this.randomNumber(3, 4) * 1000

    this.interval = window.setTimeout(() => {
      this.animateRandomCircles()
      this.startAnimation()
    }, delay)
  }

  private animateRandomCircles() {
    const circles = [];

    while(circles.length < 3) {
      const index = this.randomNumber(0, this.circles.length - 1)
      const circle = this.circles[index];
      
      circles.push(circle);
    }

    circles.filter(this.uniqueElementFilter).forEach(this.animateCircle)
  }

  private animateCircle(circle: HTMLElement) {
    const animationClass = 'not-found__circle--animate'

    circle.addEventListener('animationend', () => {
      circle.classList.remove(animationClass)
    }, { once: true })

    circle.classList.add(animationClass)
  }

  private randomNumber(min: number, max: number) {
    return Math.floor(Math.random() * (max - min + 1) + min)
  }

  private uniqueElementFilter(value: HTMLElement, index: number, self: HTMLElement[]) {
  return self.indexOf(value) === index;
}

}
</script>

<style lang="scss">
.not-found {
  display: flex;
  align-items: center;
  justify-content: center;
  background: url(/src/assets/not-found/not-found-bg-top.svg) top left no-repeat, 
              url(/src/assets/not-found/not-found-bg-bottom.svg) bottom right no-repeat, 
              #0A2053;

  @media screen and (max-width: 1024px) {
    background-size: 150px auto, 500px auto;
    
  }
}

.not-found__message {
  width: 600px;
  max-width: 80%;
}

.not-found__circle {
  transform-box: fill-box;
  transform-origin: center;
  opacity: 0;
}

.not-found__circle--animate {
  animation: pulse-black 1.5s;
}

@keyframes pulse-black {
  0% {
    transform: scale(0);
    opacity: 0;
  }
  
  50% {
    opacity: 1;
  }

  100% {
    transform: scale(1);
    opacity: 0;
  }
}
</style>
