---
title: __init__
sidebarTitle: __init__
---

# `prefect.server.utilities.messaging`

## Functions

### `create_cache` <sup><a href="https://github.com/prefecthq/prefect/blob/main/src/prefect/server/utilities/messaging/__init__.py#L158"><Icon icon="github" size="14" /></a></sup>

```python
create_cache() -> Cache
```


Creates a new cache with the applications default settings.

**Returns:**
- a new Cache instance


### `create_publisher` <sup><a href="https://github.com/prefecthq/prefect/blob/main/src/prefect/server/utilities/messaging/__init__.py#L184"><Icon icon="github" size="14" /></a></sup>

```python
create_publisher(topic: str, cache: Optional[Cache] = None, deduplicate_by: Optional[str] = None) -> Publisher
```


Creates a new publisher with the applications default settings.
Args:
    topic: the topic to publish to
Returns:
    a new Consumer instance


### `create_consumer` <sup><a href="https://github.com/prefecthq/prefect/blob/main/src/prefect/server/utilities/messaging/__init__.py#L213"><Icon icon="github" size="14" /></a></sup>

```python
create_consumer(topic: str, **kwargs: Any) -> Consumer
```


Creates a new consumer with the applications default settings.
Args:
    topic: the topic to consume from
Returns:
    a new Consumer instance


## Classes

### `Message` <sup><a href="https://github.com/prefecthq/prefect/blob/main/src/prefect/server/utilities/messaging/__init__.py#L32"><Icon icon="github" size="14" /></a></sup>


A protocol representing a message sent to a message broker.


**Methods:**

#### `data` <sup><a href="https://github.com/prefecthq/prefect/blob/main/src/prefect/server/utilities/messaging/__init__.py#L38"><Icon icon="github" size="14" /></a></sup>

```python
data(self) -> Union[str, bytes]
```

#### `attributes` <sup><a href="https://github.com/prefecthq/prefect/blob/main/src/prefect/server/utilities/messaging/__init__.py#L41"><Icon icon="github" size="14" /></a></sup>

```python
attributes(self) -> Mapping[str, Any]
```

### `Cache` <sup><a href="https://github.com/prefecthq/prefect/blob/main/src/prefect/server/utilities/messaging/__init__.py#L44"><Icon icon="github" size="14" /></a></sup>

### `Publisher` <sup><a href="https://github.com/prefecthq/prefect/blob/main/src/prefect/server/utilities/messaging/__init__.py#L59"><Icon icon="github" size="14" /></a></sup>

### `CapturedMessage` <sup><a href="https://github.com/prefecthq/prefect/blob/main/src/prefect/server/utilities/messaging/__init__.py#L85"><Icon icon="github" size="14" /></a></sup>

### `CapturingPublisher` <sup><a href="https://github.com/prefecthq/prefect/blob/main/src/prefect/server/utilities/messaging/__init__.py#L90"><Icon icon="github" size="14" /></a></sup>

### `StopConsumer` <sup><a href="https://github.com/prefecthq/prefect/blob/main/src/prefect/server/utilities/messaging/__init__.py#L129"><Icon icon="github" size="14" /></a></sup>


Exception to raise to stop a consumer.


### `Consumer` <sup><a href="https://github.com/prefecthq/prefect/blob/main/src/prefect/server/utilities/messaging/__init__.py#L138"><Icon icon="github" size="14" /></a></sup>


Abstract base class for consumers that receive messages from a message broker and
call a handler function for each message received.


### `CacheModule` <sup><a href="https://github.com/prefecthq/prefect/blob/main/src/prefect/server/utilities/messaging/__init__.py#L154"><Icon icon="github" size="14" /></a></sup>

### `BrokerModule` <sup><a href="https://github.com/prefecthq/prefect/blob/main/src/prefect/server/utilities/messaging/__init__.py#L172"><Icon icon="github" size="14" /></a></sup>
