---
title: Prefect MCP Server
sidebarTitle: Prefect MCP Server
description: Connect AI assistants to your Prefect instance using the Model Context Protocol.
---

The Prefect MCP server enables AI assistants to interact with your Prefect workflows and infrastructure through the [Model Context Protocol (MCP)](https://modelcontextprotocol.io/). This integration allows AI tools like Claude Code, Cursor, and Codex CLI to help you monitor deployments, debug flow runs, query infrastructure, and more.

<Warning>
The Prefect MCP server is currently in beta. APIs, features, and behaviors may change without notice. We encourage you to try it out and provide feedback through [GitHub issues](https://github.com/PrefectHQ/prefect-mcp-server/issues).
</Warning>

## What is the Prefect MCP server?

The Prefect MCP server is an [MCP](https://modelcontextprotocol.io/) server that provides AI assistants with tools to:

- **Monitor & inspect**: View system health, query deployments, flow runs, task runs, work pools, and execution logs
- **Debug intelligently**: Get contextual guidance for troubleshooting failed flows and deployment issues
- **Access documentation**: Query up-to-date Prefect documentation through an integrated docs proxy

The MCP tools are primarily designed for reading data and monitoring your Prefect instance. For creating or updating resources, the integrated docs proxy provides AI assistants with current information on how to use the `prefect` CLI.

## Security considerations

The Prefect MCP server provides **read-only access** to your Prefect instance. It can only access information available to the account you authenticate with—it cannot access data outside those bounds.

<Warning>
**Important:** The MCP server does not operate in isolation. MCP clients (such as Claude Code, Cursor, or Codex CLI) may have additional capabilities beyond the MCP server's read-only tools. For example, an AI assistant with terminal access could execute destructive CLI commands like `prefect deployment delete` independently of the MCP server.

When using AI agents autonomously, consider the Prefect Role associated with your API key and what actions the agent could take through other means (CLI, SDK, etc.).
</Warning>

For detailed answers to common security questions—including authentication patterns, RBAC, file access requirements, and recommendations for internal pilots—see the [Security FAQ](https://github.com/PrefectHQ/prefect-mcp-server/blob/main/SECURITY.md).

## Prerequisites

Before installing the Prefect MCP server, ensure you have:

- **Python 3.9 or newer** (for `uvx`)
- **uv** installed (Python package installer): `pip install uv` or `curl -LsSf https://astral.sh/uv/install.sh | sh`
- **A Prefect instance**: Either [Prefect Cloud](https://app.prefect.cloud) or a self-hosted Prefect server
- **Prefect credentials**: API key (for Prefect Cloud) or configured profile in `~/.prefect/profiles.toml`

## Quick start

The fastest way to get started depends on your AI assistant. Choose your platform below:

<AccordionGroup>

<Accordion title="Claude Code CLI" defaultOpen>

**Recommended: Use the marketplace**

```bash
/plugin marketplace add prefecthq/prefect-mcp-server
/plugin install prefect
```

This installs both the MCP server and a CLI skill for working with Prefect.

**Alternative: Manual CLI setup**

```bash
# Basic setup - uses your local Prefect profile from ~/.prefect/profiles.toml
claude mcp add prefect --scope user -- uvx --from prefect-mcp prefect-mcp-server

# With explicit credentials
claude mcp add prefect --scope user \
  -e PREFECT_API_URL=https://api.prefect.cloud/api/accounts/[ACCOUNT_ID]/workspaces/[WORKSPACE_ID] \
  -e PREFECT_API_KEY=your-cloud-api-key \
  -- uvx --from prefect-mcp prefect-mcp-server
```

</Accordion>

<Accordion title="Cursor">

**Option 1: Use the UI**

1. Open Cursor Settings
2. Navigate to **MCP** section
3. Click **Add Server**
4. Enter server name: `prefect`
5. Command: `uvx`
6. Arguments: `--from prefect-mcp prefect-mcp-server`

**Option 2: Manual configuration**

Create or edit `.cursor/mcp.json` in your project:

```json
{
  "mcpServers": {
    "prefect": {
      "command": "uvx",
      "args": ["--from", "prefect-mcp", "prefect-mcp-server"]
    }
  }
}
```

**With explicit credentials:**

```json
{
  "mcpServers": {
    "prefect": {
      "command": "uvx",
      "args": ["--from", "prefect-mcp", "prefect-mcp-server"],
      "env": {
        "PREFECT_API_URL": "https://api.prefect.cloud/api/accounts/[ACCOUNT_ID]/workspaces/[WORKSPACE_ID]",
        "PREFECT_API_KEY": "your-cloud-api-key"
      }
    }
  }
}
```

</Accordion>

<Accordion title="VS Code (GitHub Copilot)">

**Using the VS Code UI:**

1. Open VS Code Settings (`Cmd/Ctrl + ,`)
2. Search for "MCP"
3. Under **GitHub Copilot > MCP**, click **Add Server**
4. Configure:
   - Name: `prefect`
   - Command: `uvx`
   - Arguments: `--from prefect-mcp prefect-mcp-server`

**Using settings.json:**

Add to your VS Code `settings.json`:

```json
{
  "github.copilot.mcp.servers": {
    "prefect": {
      "command": "uvx",
      "args": ["--from", "prefect-mcp", "prefect-mcp-server"]
    }
  }
}
```

</Accordion>

<Accordion title="Cline (VS Code Extension)">

Cline automatically detects MCP servers configured in your project. Create `.cline/mcp.json`:

```json
{
  "mcpServers": {
    "prefect": {
      "command": "uvx",
      "args": ["--from", "prefect-mcp", "prefect-mcp-server"]
    }
  }
}
```

For more details, see the [Cline documentation](https://docs.cline.bot).

</Accordion>

<Accordion title="Codex CLI">

```bash
# Basic setup
codex mcp add prefect -- uvx --from prefect-mcp prefect-mcp-server

# With explicit credentials
codex mcp add prefect \
  --env PREFECT_API_URL=https://api.prefect.cloud/api/accounts/[ACCOUNT_ID]/workspaces/[WORKSPACE_ID] \
  --env PREFECT_API_KEY=your-cloud-api-key \
  -- uvx --from prefect-mcp prefect-mcp-server
```

</Accordion>

<Accordion title="Gemini CLI">

```bash
# Basic setup
gemini mcp add prefect uvx --from prefect-mcp prefect-mcp-server

# With explicit credentials
gemini mcp add prefect \
  -e PREFECT_API_URL=https://api.prefect.cloud/api/accounts/[ACCOUNT_ID]/workspaces/[WORKSPACE_ID] \
  -e PREFECT_API_KEY=your-cloud-api-key \
  uvx --from prefect-mcp prefect-mcp-server

# Install with auto-update
gemini extensions install --auto-update \
  https://github.com/PrefectHQ/prefect-mcp-server
```

</Accordion>

<Accordion title="JetBrains IDEs (AI Assistant/Junie)">

1. Open your JetBrains IDE (IntelliJ IDEA, PyCharm, etc.)
2. Go to **Settings/Preferences**
3. Navigate to **Tools → AI Assistant** (or **Junie** depending on your version)
4. Find the **MCP** section
5. Click **Add Server**
6. Configure:
   - Name: `prefect`
   - Command: `uvx`
   - Arguments: `--from prefect-mcp prefect-mcp-server`

</Accordion>

<Accordion title="Factory CLI (Droid)">

```bash
# Basic setup
droid mcp add prefect "uvx --from prefect-mcp prefect-mcp-server"

# With explicit credentials (wrap in quotes)
droid mcp add prefect "uvx --from prefect-mcp prefect-mcp-server" \
  --env PREFECT_API_URL=https://api.prefect.cloud/api/accounts/[ACCOUNT_ID]/workspaces/[WORKSPACE_ID] \
  --env PREFECT_API_KEY=your-cloud-api-key
```

</Accordion>

<Accordion title="Qoder / OpenCode">

Use the configuration UI in your respective IDE:

**Qoder:**
1. Open Qoder settings
2. Navigate to MCP configuration
3. Add new server with standard JSON configuration

**OpenCode:**
1. Open OpenCode settings
2. Find MCP servers section
3. Add server configuration

**Standard JSON configuration for both:**

```json
{
  "mcpServers": {
    "prefect": {
      "command": "uvx",
      "args": ["--from", "prefect-mcp", "prefect-mcp-server"]
    }
  }
}
```

</Accordion>

</AccordionGroup>

## Test your setup

Once configured, try these prompts to verify the connection:

- "Show me my recent flow runs"
- "What deployments are available?"
- "Debug my last failed flow run"

## Installation options

### Local installation (stdio transport)

The default setup runs the MCP server locally using `uvx`. The server automatically inherits credentials from your active Prefect profile:

```bash
uvx --from prefect-mcp prefect-mcp-server
```

**Credentials:** Uses `~/.prefect/profiles.toml` by default

### Cloud deployment (HTTP transport)

Deploy the MCP server to [FastMCP Cloud](https://fastmcp.cloud) for remote access from any client:

<Steps>
  <Step title="Fork the repository">
    Fork the [prefect-mcp-server repository](https://github.com/PrefectHQ/prefect-mcp-server) on GitHub
  </Step>

  <Step title="Deploy to FastMCP Cloud">
    1. Sign in to [fastmcp.cloud](https://fastmcp.cloud)
    2. Create a new server pointing to your fork
    3. Configure:
       - Server path: `src/prefect_mcp_server/server.py`
       - Requirements: `pyproject.toml` (or leave blank)
  </Step>

  <Step title="Set environment variables">
    Configure credentials in the FastMCP Cloud interface:

    | Environment Variable | Prefect Cloud | Self-hosted Prefect |
    |---------------------|---------------|---------------------|
    | `PREFECT_API_URL` | `https://api.prefect.cloud/api/accounts/[ACCOUNT_ID]/workspaces/[WORKSPACE_ID]` | Your server URL (e.g., `http://your-server:4200/api`) |
    | `PREFECT_API_KEY` | Your Prefect Cloud API key | Not used |
    | `PREFECT_API_AUTH_STRING` | Not used | Your authentication string (if using basic auth) |

    <Tip>
    Find your account ID and workspace ID in your Prefect Cloud browser URL:
    `https://app.prefect.cloud/account/[ACCOUNT-ID]/workspace/[WORKSPACE-ID]/dashboard`
    </Tip>
  </Step>

  <Step title="Get your server URL">
    Copy the generated URL (e.g., `https://your-server-name.fastmcp.app/mcp`) and use it in your client configuration
  </Step>
</Steps>

<Note>
When deploying to FastMCP Cloud, environment variables are configured on the FastMCP Cloud server itself, not in your client configuration. FastMCP's authentication secures access to your MCP server, while the MCP server uses your Prefect API key to access your Prefect instance.
</Note>

<Tip>
Prefect Cloud users on Team, Pro, and Enterprise plans can use service accounts for API authentication. Pro and Enterprise users can restrict service accounts to read-only access (only `see_*` permissions) since the Prefect MCP server requires no write permissions.
</Tip>

## Advanced configuration

### Configuration file locations

MCP server configurations are typically stored in these locations:

| Client | Configuration Location |
|--------|----------------------|
| Claude Code CLI | `~/.claude/config.json` |
| Cursor | `.cursor/mcp.json` (project-specific) |
| VS Code (Copilot) | `settings.json` (user or workspace) |
| Cline | `.cline/mcp.json` (project-specific) |
| Codex CLI | `~/.codex/config.toml` |
| Gemini CLI | `~/.gemini/settings.json` |
| JetBrains | IDE settings (varies by IDE) |

### Multiple server scopes

Some clients (like Claude Code) support different scopes for MCP servers:

- `--scope user`: Available across all projects (recommended)
- `--scope project`: Only available in the current project directory

```bash
# User-scoped (available everywhere)
claude mcp add prefect --scope user -- uvx --from prefect-mcp prefect-mcp-server

# Project-scoped (only in current directory)
claude mcp add prefect --scope project -- uvx --from prefect-mcp prefect-mcp-server
```

### Connecting to multiple Prefect instances

You can configure multiple MCP servers to connect to different Prefect workspaces:

**Example: Production and staging environments**

```json
{
  "mcpServers": {
    "prefect-prod": {
      "command": "uvx",
      "args": ["--from", "prefect-mcp", "prefect-mcp-server"],
      "env": {
        "PREFECT_API_URL": "https://api.prefect.cloud/api/accounts/[ACCOUNT_ID]/workspaces/[PROD_WORKSPACE_ID]",
        "PREFECT_API_KEY": "your-prod-api-key"
      }
    },
    "prefect-staging": {
      "command": "uvx",
      "args": ["--from", "prefect-mcp", "prefect-mcp-server"],
      "env": {
        "PREFECT_API_URL": "https://api.prefect.cloud/api/accounts/[ACCOUNT_ID]/workspaces/[STAGING_WORKSPACE_ID]",
        "PREFECT_API_KEY": "your-staging-api-key"
      }
    }
  }
}
```

### Troubleshooting installation

**Server not connecting:**

1. Verify `uv` is installed: `uv --version`
2. Test the server manually: `uvx --from prefect-mcp prefect-mcp-server`
3. Check your Prefect credentials are valid
4. Review client logs (location varies by client)

**Command not found errors:**

Ensure `uvx` is in your PATH. Install `uv` if needed:

```bash
# macOS/Linux
curl -LsSf https://astral.sh/uv/install.sh | sh

# Windows
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"

# Via pip
pip install uv
```

**Permission errors:**

Some clients may need explicit permissions to run external commands. Check your client's security settings and allowlists.

## Credentials configuration

The Prefect MCP server authenticates with your Prefect instance using the same configuration as the Prefect SDK.

### Default behavior

When running locally without environment variables, the server inherits credentials from your active Prefect profile:

- Profile configuration: `~/.prefect/profiles.toml`
- Uses the same API URL and authentication as your current `prefect` CLI commands

### Environment variables

Override the default credentials by setting environment variables:

**For Prefect Cloud:**

```bash
PREFECT_API_URL=https://api.prefect.cloud/api/accounts/[ACCOUNT_ID]/workspaces/[WORKSPACE_ID]
PREFECT_API_KEY=your-cloud-api-key
```

**For self-hosted Prefect with basic auth:**

```bash
PREFECT_API_URL=http://your-server:4200/api
PREFECT_API_AUTH_STRING=your-auth-string
```

<Tip>
Find your account ID and workspace ID in your Prefect Cloud browser URL:

`https://app.prefect.cloud/account/[ACCOUNT-ID]/workspace/[WORKSPACE-ID]/dashboard`
</Tip>

### Credential precedence

Environment variables take precedence over profile settings:

1. Environment variables (`PREFECT_API_URL`, `PREFECT_API_KEY`)
2. Active Prefect profile (`~/.prefect/profiles.toml`)

## Available capabilities

The Prefect MCP server provides these main capabilities:

### Monitoring & inspection

- View dashboard overviews with flow run statistics and work pool status
- Query deployments, flow runs, task runs, and work pools with advanced filtering
- Retrieve detailed execution logs from flow runs
- Track events across your workflow ecosystem
- Review automations and their configurations

### Orchestration & actions

- Trigger deployment runs with custom parameters and tags
- Pass dynamic configurations to workflows at runtime

### Intelligent debugging

- Get contextual guidance for troubleshooting failed flow runs
- Diagnose deployment issues including concurrency problems
- Identify root causes of workflow failures
- Analyze rate limiting issues (Prefect Cloud only)

### Documentation access

The MCP server includes a built-in docs proxy that provides AI assistants with up-to-date information from the Prefect documentation. This enables your AI assistant to:

- Look up current API syntax and usage patterns
- Find the correct `prefect` CLI commands for creating and updating resources
- Access the latest best practices and examples

## Prompting tips

To get the most out of the Prefect MCP server, guide your AI assistant with these patterns:

### Use the prefect CLI for write operations

The MCP tools are optimized for reading and monitoring. For creating or updating resources, prompt your assistant to use the `prefect` CLI:

**Example prompts:**
- "Use the `prefect` CLI to create a new deployment"
- "Show me how to update this deployment's schedule using `prefect`"
- "Create an automation using the `prefect` CLI"

### Leverage the docs proxy

The integrated docs proxy gives your assistant access to current Prefect documentation:

**Example prompts:**
- "Look up the latest syntax for creating a work pool"
- "Find documentation on how to configure Docker work pools"
- "What are the current best practices for deployment configuration?"

### Ask diagnostic questions

The MCP server excels at helping diagnose issues:

**Example prompts:**
- "Why is my deployment not running?"
- "Debug the last failed flow run"
- "Why are my flow runs delayed?"
- "Show me which work pools have no active workers"

## Learn more

- [Prefect MCP Server on GitHub](https://github.com/PrefectHQ/prefect-mcp-server)
- [Security FAQ](https://github.com/PrefectHQ/prefect-mcp-server/blob/main/SECURITY.md)
- [Model Context Protocol](https://modelcontextprotocol.io/)
- [FastMCP Cloud](https://fastmcp.cloud)
