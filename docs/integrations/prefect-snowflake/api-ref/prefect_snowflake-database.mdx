---
title: database
sidebarTitle: database
---

# `prefect_snowflake.database`


Module for querying against Snowflake databases.

## Functions

### `snowflake_query` <sup><a href="https://github.com/PrefectHQ/prefect/blob/main/src/integrations/prefect-snowflake/prefect_snowflake/database.py#L829" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
snowflake_query(query: str, snowflake_connector: SnowflakeConnector, params: Union[Tuple[Any], Dict[str, Any]] = None, cursor_type: Type[SnowflakeCursor] = SnowflakeCursor, poll_frequency_seconds: int = 1) -> List[Tuple[Any]]
```


Executes a query against a Snowflake database.

**Args:**
- `query`: The query to execute against the database.
- `params`: The params to replace the placeholders in the query.
- `snowflake_connector`: The credentials to use to authenticate.
- `cursor_type`: The type of database cursor to use for the query.
- `poll_frequency_seconds`: Number of seconds to wait in between checks for
run completion.

**Returns:**
- The output of `response.fetchall()`.

**Examples:**

Query Snowflake table with the ID value parameterized.
```python
from prefect import flow
from prefect_snowflake.credentials import SnowflakeCredentials
from prefect_snowflake.database import SnowflakeConnector, snowflake_query


@flow
def snowflake_query_flow():
    snowflake_credentials = SnowflakeCredentials(
        account="account",
        user="user",
        password="password",
    )
    snowflake_connector = SnowflakeConnector(
        database="database",
        warehouse="warehouse",
        schema="schema",
        credentials=snowflake_credentials
    )
    result = snowflake_query(
        "SELECT * FROM table WHERE id=%{id_param}s LIMIT 8;",
        snowflake_connector,
        params={"id_param": 1}
    )
    return result

snowflake_query_flow()
```


### `snowflake_query_async` <sup><a href="https://github.com/PrefectHQ/prefect/blob/main/src/integrations/prefect-snowflake/prefect_snowflake/database.py#L896" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
snowflake_query_async(query: str, snowflake_connector: SnowflakeConnector, params: Union[Tuple[Any], Dict[str, Any]] = None, cursor_type: Type[SnowflakeCursor] = SnowflakeCursor, poll_frequency_seconds: int = 1) -> List[Tuple[Any]]
```


Executes a query against a Snowflake database.

**Args:**
- `query`: The query to execute against the database.
- `params`: The params to replace the placeholders in the query.
- `snowflake_connector`: The credentials to use to authenticate.
- `cursor_type`: The type of database cursor to use for the query.
- `poll_frequency_seconds`: Number of seconds to wait in between checks for
run completion.

**Returns:**
- The output of `response.fetchall()`.

**Examples:**

Query Snowflake table with the ID value parameterized.
```python
from prefect import flow
from prefect_snowflake.credentials import SnowflakeCredentials
from prefect_snowflake.database import SnowflakeConnector, snowflake_query


@flow
def snowflake_query_flow():
    snowflake_credentials = SnowflakeCredentials(
        account="account",
        user="user",
        password="password",
    )
    snowflake_connector = SnowflakeConnector(
        database="database",
        warehouse="warehouse",
        schema="schema",
        credentials=snowflake_credentials
    )
    result = snowflake_query(
        "SELECT * FROM table WHERE id=%{id_param}s LIMIT 8;",
        snowflake_connector,
        params={"id_param": 1}
    )
    return result

snowflake_query_flow()
```


### `snowflake_multiquery` <sup><a href="https://github.com/PrefectHQ/prefect/blob/main/src/integrations/prefect-snowflake/prefect_snowflake/database.py#L963" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
snowflake_multiquery(queries: List[str], snowflake_connector: SnowflakeConnector, params: Union[Tuple[Any], Dict[str, Any]] = None, cursor_type: Type[SnowflakeCursor] = SnowflakeCursor, as_transaction: bool = False, return_transaction_control_results: bool = False, poll_frequency_seconds: int = 1) -> List[List[Tuple[Any]]]
```


Executes multiple queries against a Snowflake database in a shared session.
Allows execution in a transaction.

**Args:**
- `queries`: The list of queries to execute against the database.
- `params`: The params to replace the placeholders in the query.
- `snowflake_connector`: The credentials to use to authenticate.
- `cursor_type`: The type of database cursor to use for the query.
- `as_transaction`: If True, queries are executed in a transaction.
- `return_transaction_control_results`: Determines if the results of queries
controlling the transaction (BEGIN/COMMIT) should be returned.
- `poll_frequency_seconds`: Number of seconds to wait in between checks for
run completion.

**Returns:**
- List of the outputs of `response.fetchall()` for each query.

**Examples:**

Query Snowflake table with the ID value parameterized.
```python
from prefect import flow
from prefect_snowflake.credentials import SnowflakeCredentials
from prefect_snowflake.database import SnowflakeConnector, snowflake_multiquery


@flow
def snowflake_multiquery_flow():
    snowflake_credentials = SnowflakeCredentials(
        account="account",
        user="user",
        password="password",
    )
    snowflake_connector = SnowflakeConnector(
        database="database",
        warehouse="warehouse",
        schema="schema",
        credentials=snowflake_credentials
    )
    result = snowflake_multiquery(
        ["SELECT * FROM table WHERE id=%{id_param}s LIMIT 8;", "SELECT 1,2"],
        snowflake_connector,
        params={"id_param": 1},
        as_transaction=True
    )
    return result

snowflake_multiquery_flow()
```


### `snowflake_multiquery_async` <sup><a href="https://github.com/PrefectHQ/prefect/blob/main/src/integrations/prefect-snowflake/prefect_snowflake/database.py#L1048" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
snowflake_multiquery_async(queries: List[str], snowflake_connector: SnowflakeConnector, params: Union[Tuple[Any], Dict[str, Any]] = None, cursor_type: Type[SnowflakeCursor] = SnowflakeCursor, as_transaction: bool = False, return_transaction_control_results: bool = False, poll_frequency_seconds: int = 1) -> List[List[Tuple[Any]]]
```


Executes multiple queries against a Snowflake database in a shared session.
Allows execution in a transaction.

**Args:**
- `queries`: The list of queries to execute against the database.
- `params`: The params to replace the placeholders in the query.
- `snowflake_connector`: The credentials to use to authenticate.
- `cursor_type`: The type of database cursor to use for the query.
- `as_transaction`: If True, queries are executed in a transaction.
- `return_transaction_control_results`: Determines if the results of queries
controlling the transaction (BEGIN/COMMIT) should be returned.
- `poll_frequency_seconds`: Number of seconds to wait in between checks for
run completion.

**Returns:**
- List of the outputs of `response.fetchall()` for each query.

**Examples:**

Query Snowflake table with the ID value parameterized.
```python
from prefect import flow
from prefect_snowflake.credentials import SnowflakeCredentials
from prefect_snowflake.database import SnowflakeConnector, snowflake_multiquery


@flow
def snowflake_multiquery_flow():
    snowflake_credentials = SnowflakeCredentials(
        account="account",
        user="user",
        password="password",
    )
    snowflake_connector = SnowflakeConnector(
        database="database",
        warehouse="warehouse",
        schema="schema",
        credentials=snowflake_credentials
    )
    result = snowflake_multiquery(
        ["SELECT * FROM table WHERE id=%{id_param}s LIMIT 8;", "SELECT 1,2"],
        snowflake_connector,
        params={"id_param": 1},
        as_transaction=True
    )
    return result

snowflake_multiquery_flow()
```


### `snowflake_query_sync` <sup><a href="https://github.com/PrefectHQ/prefect/blob/main/src/integrations/prefect-snowflake/prefect_snowflake/database.py#L1133" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
snowflake_query_sync(query: str, snowflake_connector: SnowflakeConnector, params: Union[Tuple[Any], Dict[str, Any]] = None, cursor_type: Type[SnowflakeCursor] = SnowflakeCursor) -> List[Tuple[Any]]
```


Executes a query in sync mode against a Snowflake database.

**Args:**
- `query`: The query to execute against the database.
- `params`: The params to replace the placeholders in the query.
- `snowflake_connector`: The credentials to use to authenticate.
- `cursor_type`: The type of database cursor to use for the query.

**Returns:**
- The output of `response.fetchall()`.

**Examples:**

Execute a put statement.
```python
from prefect import flow
from prefect_snowflake.credentials import SnowflakeCredentials
from prefect_snowflake.database import SnowflakeConnector, snowflake_query


@flow
def snowflake_query_sync_flow():
    snowflake_credentials = SnowflakeCredentials(
        account="account",
        user="user",
        password="password",
    )
    snowflake_connector = SnowflakeConnector(
        database="database",
        warehouse="warehouse",
        schema="schema",
        credentials=snowflake_credentials
    )
    result = snowflake_query_sync(
        "put file://a_file.csv @mystage;",
        snowflake_connector,
    )
    return result

snowflake_query_sync_flow()
```


## Classes

### `SnowflakeConnector` <sup><a href="https://github.com/PrefectHQ/prefect/blob/main/src/integrations/prefect-snowflake/prefect_snowflake/database.py#L21" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>


Block used to manage connections with Snowflake.

Upon instantiating, a connection is created and maintained for the life of
the object until the close method is called.

It is recommended to use this block as a context manager, which will automatically
close the engine and its connections when the context is exited.

It is also recommended that this block is loaded and consumed within a single task
or flow because if the block is passed across separate tasks and flows,
the state of the block's connection and cursor will be lost.

**Args:**
- `credentials`: The credentials to authenticate with Snowflake.
- `database`: The name of the default database to use.
- `warehouse`: The name of the default warehouse to use.
- `schema`: The name of the default schema to use;
this attribute is accessible through `SnowflakeConnector(...).schema_`.
- `fetch_size`: The number of rows to fetch at a time.
- `poll_frequency_s`: The number of seconds before checking query.

**Examples:**

Load stored Snowflake connector as a context manager:
```python
from prefect_snowflake.database import SnowflakeConnector

snowflake_connector = SnowflakeConnector.load("BLOCK_NAME")
```

Insert data into database and fetch results.
```python
from prefect_snowflake.database import SnowflakeConnector

with SnowflakeConnector.load("BLOCK_NAME") as conn:
    conn.execute(
        "CREATE TABLE IF NOT EXISTS customers (name varchar, address varchar);"
    )
    conn.execute_many(
        "INSERT INTO customers (name, address) VALUES (%(name)s, %(address)s);",
        seq_of_parameters=[
            {"name": "Ford", "address": "Highway 42"},
            {"name": "Unknown", "address": "Space"},
            {"name": "Me", "address": "Myway 88"},
        ],
    )
    results = conn.fetch_all(
        "SELECT * FROM customers WHERE address = %(address)s",
        parameters={"address": "Space"}
    )
    print(results)
```


**Methods:**

#### `close` <sup><a href="https://github.com/PrefectHQ/prefect/blob/main/src/integrations/prefect-snowflake/prefect_snowflake/database.py#L790" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
close(self)
```

Closes connection and its cursors.


#### `execute` <sup><a href="https://github.com/PrefectHQ/prefect/blob/main/src/integrations/prefect-snowflake/prefect_snowflake/database.py#L616" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
execute(self, operation: str, parameters: Optional[Dict[str, Any]] = None, cursor_type: Type[SnowflakeCursor] = SnowflakeCursor, **execute_kwargs: Any) -> None
```

Executes an operation on the database. This method is intended to be used
for operations that do not return data, such as INSERT, UPDATE, or DELETE.
Unlike the fetch methods, this method will always execute the operation
upon calling.

**Args:**
- `operation`: The SQL query or other operation to be executed.
- `parameters`: The parameters for the operation.
- `cursor_type`: The class of the cursor to use when creating a Snowflake cursor.
- `**execute_kwargs`: Additional options to pass to `cursor.execute_async`.

**Examples:**

Create table named customers with two columns, name and address.
```python
from prefect_snowflake.database import SnowflakeConnector

with SnowflakeConnector.load("BLOCK_NAME") as conn:
    conn.execute(
        "CREATE TABLE IF NOT EXISTS customers (name varchar, address varchar);"
    )
```


#### `execute_async` <sup><a href="https://github.com/PrefectHQ/prefect/blob/main/src/integrations/prefect-snowflake/prefect_snowflake/database.py#L657" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
execute_async(self, operation: str, parameters: Optional[Dict[str, Any]] = None, cursor_type: Type[SnowflakeCursor] = SnowflakeCursor, **execute_kwargs: Any) -> None
```

Executes an operation on the database. This method is intended to be used
for operations that do not return data, such as INSERT, UPDATE, or DELETE.
Unlike the fetch methods, this method will always execute the operation
upon calling.

**Args:**
- `operation`: The SQL query or other operation to be executed.
- `parameters`: The parameters for the operation.
- `cursor_type`: The class of the cursor to use when creating a Snowflake cursor.
- `**execute_kwargs`: Additional options to pass to `cursor.execute_async`.

**Examples:**

Create table named customers with two columns, name and address.
```python
from prefect_snowflake.database import SnowflakeConnector

with SnowflakeConnector.load("BLOCK_NAME") as conn:
    conn.execute(
        "CREATE TABLE IF NOT EXISTS customers (name varchar, address varchar);"
    )
```


#### `execute_many` <sup><a href="https://github.com/PrefectHQ/prefect/blob/main/src/integrations/prefect-snowflake/prefect_snowflake/database.py#L698" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
execute_many(self, operation: str, seq_of_parameters: List[Dict[str, Any]]) -> None
```

Executes many operations on the database. This method is intended to be used
for operations that do not return data, such as INSERT, UPDATE, or DELETE.
Unlike the fetch methods, this method will always execute the operations
upon calling.

**Args:**
- `operation`: The SQL query or other operation to be executed.
- `seq_of_parameters`: The sequence of parameters for the operation.

**Examples:**

Create table and insert three rows into it.
```python
from prefect_snowflake.database import SnowflakeConnector

with SnowflakeConnector.load("BLOCK_NAME") as conn:
    conn.execute(
        "CREATE TABLE IF NOT EXISTS customers (name varchar, address varchar);"
    )
    conn.execute_many(
        "INSERT INTO customers (name, address) VALUES (%(name)s, %(address)s);",
        seq_of_parameters=[
            {"name": "Marvin", "address": "Highway 42"},
            {"name": "Ford", "address": "Highway 42"},
            {"name": "Unknown", "address": "Space"},
        ],
    )
```


#### `execute_many_async` <sup><a href="https://github.com/PrefectHQ/prefect/blob/main/src/integrations/prefect-snowflake/prefect_snowflake/database.py#L744" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
execute_many_async(self, operation: str, seq_of_parameters: List[Dict[str, Any]]) -> None
```

Executes many operations on the database. This method is intended to be used
for operations that do not return data, such as INSERT, UPDATE, or DELETE.
Unlike the fetch methods, this method will always execute the operations
upon calling.

**Args:**
- `operation`: The SQL query or other operation to be executed.
- `seq_of_parameters`: The sequence of parameters for the operation.

**Examples:**

Create table and insert three rows into it.
```python
from prefect_snowflake.database import SnowflakeConnector

with SnowflakeConnector.load("BLOCK_NAME") as conn:
    conn.execute(
        "CREATE TABLE IF NOT EXISTS customers (name varchar, address varchar);"
    )
    conn.execute_many(
        "INSERT INTO customers (name, address) VALUES (%(name)s, %(address)s);",
        seq_of_parameters=[
            {"name": "Marvin", "address": "Highway 42"},
            {"name": "Ford", "address": "Highway 42"},
            {"name": "Unknown", "address": "Space"},
        ],
    )
```


#### `fetch_all` <sup><a href="https://github.com/PrefectHQ/prefect/blob/main/src/integrations/prefect-snowflake/prefect_snowflake/database.py#L519" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
fetch_all(self, operation: str, parameters: Optional[Dict[str, Any]] = None, cursor_type: Type[SnowflakeCursor] = SnowflakeCursor, **execute_kwargs: Any) -> List[Tuple[Any]]
```

Fetch all results from the database.
Repeated calls using the same inputs to *any* of the fetch methods of this
block will skip executing the operation again, and instead,
return the next set of results from the previous execution,
until the reset_cursors method is called.

**Args:**
- `operation`: The SQL query or other operation to be executed.
- `parameters`: The parameters for the operation.
- `cursor_type`: The class of the cursor to use when creating a Snowflake cursor.
- `**execute_kwargs`: Additional options to pass to `cursor.execute_async`.

**Returns:**
- A list of tuples containing the data returned by the database,
where each row is a tuple and each column is a value in the tuple.


#### `fetch_all_async` <sup><a href="https://github.com/PrefectHQ/prefect/blob/main/src/integrations/prefect-snowflake/prefect_snowflake/database.py#L555" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
fetch_all_async(self, operation: str, parameters: Optional[Dict[str, Any]] = None, cursor_type: Type[SnowflakeCursor] = SnowflakeCursor, **execute_kwargs: Any) -> List[Tuple[Any]]
```

Fetch all results from the database.
Repeated calls using the same inputs to *any* of the fetch methods of this
block will skip executing the operation again, and instead,
return the next set of results from the previous execution,
until the reset_cursors method is called.

**Args:**
- `operation`: The SQL query or other operation to be executed.
- `parameters`: The parameters for the operation.
- `cursor_type`: The class of the cursor to use when creating a Snowflake cursor.
- `**execute_kwargs`: Additional options to pass to `cursor.execute_async`.

**Returns:**
- A list of tuples containing the data returned by the database,
where each row is a tuple and each column is a value in the tuple.

**Examples:**

Fetch all rows from the database where address is Highway 42.
```python
from prefect_snowflake.database import SnowflakeConnector

with SnowflakeConnector.load("BLOCK_NAME") as conn:
    await conn.execute_async(
        "CREATE TABLE IF NOT EXISTS customers (name varchar, address varchar);"
    )
    await conn.execute_many_async(
        "INSERT INTO customers (name, address) VALUES (%(name)s, %(address)s);",
        seq_of_parameters=[
            {"name": "Marvin", "address": "Highway 42"},
            {"name": "Ford", "address": "Highway 42"},
            {"name": "Unknown", "address": "Highway 42"},
            {"name": "Me", "address": "Myway 88"},
        ],
    )
    result = await conn.fetch_all_async(
        "SELECT * FROM customers WHERE address = %(address)s",
        parameters={"address": "Highway 42"},
    )
    print(result)  # Marvin, Ford, Unknown
```


#### `fetch_many` <sup><a href="https://github.com/PrefectHQ/prefect/blob/main/src/integrations/prefect-snowflake/prefect_snowflake/database.py#L376" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
fetch_many(self, operation: str, parameters: Optional[Sequence[Dict[str, Any]]] = None, size: Optional[int] = None, cursor_type: Type[SnowflakeCursor] = SnowflakeCursor, **execute_kwargs: Any) -> List[Tuple[Any]]
```

Fetch a limited number of results from the database.
Repeated calls using the same inputs to *any* of the fetch methods of this
block will skip executing the operation again, and instead,
return the next set of results from the previous execution,
until the reset_cursors method is called.

**Args:**
- `operation`: The SQL query or other operation to be executed.
- `parameters`: The parameters for the operation.
- `size`: The number of results to return; if None or 0, uses the value of
`fetch_size` configured on the block.
- `cursor_type`: The class of the cursor to use when creating a Snowflake cursor.
- `**execute_kwargs`: Additional options to pass to `cursor.execute_async`.

**Returns:**
- A list of tuples containing the data returned by the database,
where each row is a tuple and each column is a value in the tuple.

**Examples:**

Repeatedly fetch two rows from the database where address is Highway 42.
```python
from prefect_snowflake.database import SnowflakeConnector

with SnowflakeConnector.load("BLOCK_NAME") as conn:
    conn.execute(
        "CREATE TABLE IF NOT EXISTS customers (name varchar, address varchar);"
    )
    conn.execute_many(
        "INSERT INTO customers (name, address) VALUES (%(name)s, %(address)s);",
        seq_of_parameters=[
            {"name": "Marvin", "address": "Highway 42"},
            {"name": "Ford", "address": "Highway 42"},
            {"name": "Unknown", "address": "Highway 42"},
            {"name": "Me", "address": "Highway 42"},
        ],
    )
    result = conn.fetch_many(
        "SELECT * FROM customers WHERE address = %(address)s",
        parameters={"address": "Highway 42"},
        size=2
    )
    print(result)  # Marvin, Ford
    result = conn.fetch_many(
        "SELECT * FROM customers WHERE address = %(address)s",
        parameters={"address": "Highway 42"},
        size=2
    )
    print(result)  # Unknown, Me
```


#### `fetch_many_async` <sup><a href="https://github.com/PrefectHQ/prefect/blob/main/src/integrations/prefect-snowflake/prefect_snowflake/database.py#L447" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
fetch_many_async(self, operation: str, parameters: Optional[Sequence[Dict[str, Any]]] = None, size: Optional[int] = None, cursor_type: Type[SnowflakeCursor] = SnowflakeCursor, **execute_kwargs: Any) -> List[Tuple[Any]]
```

Fetch a limited number of results from the database asynchronously.
Repeated calls using the same inputs to *any* of the fetch methods of this
block will skip executing the operation again, and instead,
return the next set of results from the previous execution,
until the reset_cursors method is called.

**Args:**
- `operation`: The SQL query or other operation to be executed.
- `parameters`: The parameters for the operation.
- `size`: The number of results to return; if None or 0, uses the value of
`fetch_size` configured on the block.
- `cursor_type`: The class of the cursor to use when creating a Snowflake cursor.
- `**execute_kwargs`: Additional options to pass to `cursor.execute_async`.

**Returns:**
- A list of tuples containing the data returned by the database,
where each row is a tuple and each column is a value in the tuple.

**Examples:**

Repeatedly fetch two rows from the database where address is Highway 42.
```python
from prefect_snowflake.database import SnowflakeConnector

with SnowflakeConnector.load("BLOCK_NAME") as conn:
    conn.execute(
        "CREATE TABLE IF NOT EXISTS customers (name varchar, address varchar);"
    )
    conn.execute_many(
        "INSERT INTO customers (name, address) VALUES (%(name)s, %(address)s);",
        seq_of_parameters=[
            {"name": "Marvin", "address": "Highway 42"},
            {"name": "Ford", "address": "Highway 42"},
            {"name": "Unknown", "address": "Highway 42"},
            {"name": "Me", "address": "Highway 42"},
        ],
    )
    result = conn.fetch_many(
        "SELECT * FROM customers WHERE address = %(address)s",
        parameters={"address": "Highway 42"},
        size=2
    )
    print(result)  # Marvin, Ford
    result = conn.fetch_many(
        "SELECT * FROM customers WHERE address = %(address)s",
        parameters={"address": "Highway 42"},
        size=2
    )
    print(result)  # Unknown, Me
```


#### `fetch_one` <sup><a href="https://github.com/PrefectHQ/prefect/blob/main/src/integrations/prefect-snowflake/prefect_snowflake/database.py#L257" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
fetch_one(self, operation: str, parameters: Optional[Dict[str, Any]] = None, cursor_type: Type[SnowflakeCursor] = SnowflakeCursor, **execute_kwargs: Any) -> Tuple[Any]
```

Fetch a single result from the database.
Repeated calls using the same inputs to *any* of the fetch methods of this
block will skip executing the operation again, and instead,
return the next set of results from the previous execution,
until the reset_cursors method is called.

**Args:**
- `operation`: The SQL query or other operation to be executed.
- `parameters`: The parameters for the operation.
- `cursor_type`: The class of the cursor to use when creating a Snowflake cursor.
- `**execute_kwargs`: Additional options to pass to `cursor.execute_async`.

**Returns:**
- A tuple containing the data returned by the database,
where each row is a tuple and each column is a value in the tuple.

**Examples:**

Fetch one row from the database where address is Space.
```python
from prefect_snowflake.database import SnowflakeConnector

with SnowflakeConnector.load("BLOCK_NAME") as conn:
    conn.execute(
        "CREATE TABLE IF NOT EXISTS customers (name varchar, address varchar);"
    )
    conn.execute_many(
        "INSERT INTO customers (name, address) VALUES (%(name)s, %(address)s);",
        seq_of_parameters=[
            {"name": "Ford", "address": "Highway 42"},
            {"name": "Unknown", "address": "Space"},
            {"name": "Me", "address": "Myway 88"},
        ],
    )
    result = conn.fetch_one(
        "SELECT * FROM customers WHERE address = %(address)s",
        parameters={"address": "Space"}
    )
    print(result)
```


#### `fetch_one_async` <sup><a href="https://github.com/PrefectHQ/prefect/blob/main/src/integrations/prefect-snowflake/prefect_snowflake/database.py#L316" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
fetch_one_async(self, operation: str, parameters: Optional[Dict[str, Any]] = None, cursor_type: Type[SnowflakeCursor] = SnowflakeCursor, **execute_kwargs: Any) -> Tuple[Any]
```

Fetch a single result from the database asynchronously.
Repeated calls using the same inputs to *any* of the fetch methods of this
block will skip executing the operation again, and instead,
return the next set of results from the previous execution,
until the reset_cursors method is called.

**Args:**
- `operation`: The SQL query or other operation to be executed.
- `parameters`: The parameters for the operation.
- `cursor_type`: The class of the cursor to use when creating a Snowflake cursor.
- `**execute_kwargs`: Additional options to pass to `cursor.execute_async`.

**Returns:**
- A tuple containing the data returned by the database,
where each row is a tuple and each column is a value in the tuple.

**Examples:**

Fetch one row from the database where address is Space.
```python
from prefect_snowflake.database import SnowflakeConnector

with SnowflakeConnector.load("BLOCK_NAME") as conn:
    conn.execute(
        "CREATE TABLE IF NOT EXISTS customers (name varchar, address varchar);"
    )
    conn.execute_many(
        "INSERT INTO customers (name, address) VALUES (%(name)s, %(address)s);",
        seq_of_parameters=[
            {"name": "Ford", "address": "Highway 42"},
            {"name": "Unknown", "address": "Space"},
            {"name": "Me", "address": "Myway 88"},
        ],
    )
    result = await conn.fetch_one_async(
        "SELECT * FROM customers WHERE address = %(address)s",
        parameters={"address": "Space"}
    )
    print(result)
```


#### `get_connection` <sup><a href="https://github.com/PrefectHQ/prefect/blob/main/src/integrations/prefect-snowflake/prefect_snowflake/database.py#L112" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
get_connection(self, **connect_kwargs: Any) -> SnowflakeConnection
```

Returns an authenticated connection that can be
used to query from Snowflake databases.

**Args:**
- `**connect_kwargs`: Additional arguments to pass to
`snowflake.connector.connect`.

**Returns:**
- The authenticated SnowflakeConnection.

**Examples:**

```python
from prefect_snowflake.credentials import SnowflakeCredentials
from prefect_snowflake.database import SnowflakeConnector

snowflake_credentials = SnowflakeCredentials(
    account="account",
    user="user",
    password="password",
)
snowflake_connector = SnowflakeConnector(
    database="database",
    warehouse="warehouse",
    schema="schema",
    credentials=snowflake_credentials
)
with snowflake_connector.get_connection() as connection:
    ...
```


#### `reset_cursors` <sup><a href="https://github.com/PrefectHQ/prefect/blob/main/src/integrations/prefect-snowflake/prefect_snowflake/database.py#L216" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
reset_cursors(self) -> None
```

Tries to close all opened cursors.

**Examples:**

Reset the cursors to refresh cursor position.
```python
from prefect_snowflake.database import SnowflakeConnector

with SnowflakeConnector.load("BLOCK_NAME") as conn:
    conn.execute(
        "CREATE TABLE IF NOT EXISTS customers (name varchar, address varchar);"
    )
    conn.execute_many(
        "INSERT INTO customers (name, address) VALUES (%(name)s, %(address)s);",
        seq_of_parameters=[
            {"name": "Ford", "address": "Highway 42"},
            {"name": "Unknown", "address": "Space"},
            {"name": "Me", "address": "Myway 88"},
        ],
    )
    print(conn.fetch_one("SELECT * FROM customers"))  # Ford
    conn.reset_cursors()
    print(conn.fetch_one("SELECT * FROM customers"))  # should be Ford again
```

